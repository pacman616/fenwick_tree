#!/usr/bin/env python3

import sys, numpy, matplotlib, os.path
import matplotlib.pyplot as plt
from matplotlib.ticker import FuncFormatter

matplotlib.rcParams['text.usetex'] = True
matplotlib.rcParams['text.latex.preamble'] = [r'\usepackage{amsmath}']

if __name__ == '__main__':
    fname = os.path.join(sys.argv[1])
    data = numpy.genfromtxt(fname, delimiter=',', missing_values=set([0, '0']), names=True, autostrip=True, case_sensitive=True, deletechars='', dtype=None)
    matplotlib.rcParams.update({'font.size': 8})
    #######
    #plt.plot(data['Length'], data['fixed[F]1'], linestyle='--',  color='#000000', label='fixed[F]1')
    plt.plot(data['Length'], data['fixed[F]8'], linestyle='-',  color='#000000', label='fixed[F]8')
    #plt.plot(data['Length'], data['fixed[F]16'], linestyle=':',  color='#000000', label='fixed[F]16')
    #plt.plot(data['Length'], data['byte[F]1'],  linestyle='--',  color='#ff0000', label='byte[F]1')
    plt.plot(data['Length'], data['byte[F]8'],  linestyle='-',  color='#ff0000', label='byte[F]8')
    #plt.plot(data['Length'], data['byte[F]16'],  linestyle=':',  color='#ff0000', label='byte[F]16')
    plt.plot(data['Length'], data['scipy'],     linestyle='-',  color='#d2691e', label='SciPy')
    plt.plot(data['Length'], data['prezza'],    linestyle='-',  color='#0000ff', label='Prezza')
    #######
    plt.xlabel('Size ($2^n$)', fontsize='medium')
    plt.ylabel('Time (nS)', fontsize='medium')
    plt.legend(loc="upper left", ncol=2, shadow=True, fancybox=True, prop={'size': 8}, framealpha=1, frameon=True)
    plt.show()


# if __name__ == '__main__':
#     fname = os.path.join(sys.argv[1])
#     data = numpy.genfromtxt(fname, delimiter=',', missing_values=set([0, '0']), names=True, autostrip=True, case_sensitive=True, deletechars='', dtype=None)
#     plt.plot(data['Length'], data['fixed[F]1'],  's', color='#000000')
#     plt.plot(data['Length'], data['fixed[F]2'],  'v', color='#999999')
#     plt.plot(data['Length'], data['fixed[F]4'],  '^', color='#ff0000')
#     plt.plot(data['Length'], data['fixed[F]8'],  '<', color='#990000')
#     plt.plot(data['Length'], data['fixed[F]16'], '>', color='#00ff00')
#     # plt.plot(data['Length'], data['prezza'],     'o')
#     matplotlib.rcParams.update({'font.size': 8})
#     plt.savefig('transp', format='pdf')
